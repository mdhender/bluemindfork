BMCYRUS="5.0.0-bluemind370"
BMSDS="5.0.0-370"

BMES="7.17.15-bluemind109"

BMKEYCLOAK="22.0.5-bluemind415"

KAFKA_REPL="0.1.0-bluemind513"
KAFKA="3.6.0-bluemind412"
MINIO="2023.11.01-bluemind412"
WEED="3.58-bluemind412"
CASS="5.0-alpha1-bluemind412"

BMJDK="21.0.1+12-bluemind409"
BMSNZIP="1.0.4-bluemind4"
BMNGINX="1.24.0-bluemind109"
BMPHP="5.6.40-bluemind123"
BMPHPMEMCACHE="3.0.8-bluemind123"

# tick
TELEGRAF="1.26.1-0"
KAPACITOR="1.6.5.bm4~7eb3e20a-0"
CHRONOGRAF="1.10.1.bm4~34148c7f5"
INFLUXDB="1.8.10.bm4~247d383a3"

# OpenTelemetry
TELEMETRY="1.32.0-bm9"
GRAFANA="10.2.2"
GRAFANA_MIMIR="2.10.4"
GRAFANA_TEMPO="2.3.1"
GRAFANA_AGENT="0.38.1-1"
GRAFANA_STACK="${TELEMETRY}"

# PostgreSQL
# Use EXTDEPS-getlastpg.sh if you need to modify (requires python3 + requests for RHEL)
# Example: ./EXTDEPS-getlastpg.sh 16 | sort # for PostgreSQL 15
BMPOSTGRESQL="16.1-bluemind723"

# Override from EXTDEPS-getlastpg
PG_FOCAL="16.1-1.pgdg20.04+1"
PGCOMMON_FOCAL="256.pgdg20.04+1"
PG_REPACK_FOCAL="1.5.0-1.pgdg20.04+1"
PG_QUALSTATS_FOCAL="2.1.0-1.pgdg20.04+1"
PG_STAT_KCACHE_FOCAL="2.2.2-2.pgdg20.04+1"
PG_TRACK_SETTINGS_FOCAL="2.1.2-2.pgdg20.04+1"
PG_WAIT_SAMPLING_FOCAL="1.1.5-1.pgdg20.04+1"
PG_HYPOPG_FOCAL="1.4.0-2.pgdg20.04+1"
PG_POWA_FOCAL="4.2.1-1.pgdg20.04+1"
PG_JAMMY="16.1-1.pgdg22.04+1"
PGCOMMON_JAMMY="256.pgdg22.04+1"
PG_REPACK_JAMMY="1.5.0-1.pgdg22.04+1"
PG_QUALSTATS_JAMMY="2.1.0-1.pgdg22.04+1"
PG_STAT_KCACHE_JAMMY="2.2.2-2.pgdg22.04+1"
PG_TRACK_SETTINGS_JAMMY="2.1.2-2.pgdg22.04+1"
PG_WAIT_SAMPLING_JAMMY="1.1.5-1.pgdg22.04+1"
PG_HYPOPG_JAMMY="1.4.0-2.pgdg22.04+1"
PG_POWA_JAMMY="4.2.1-1.pgdg22.04+1"
PG_BUSTER="16.1-1.pgdg100+1"
PGCOMMON_BUSTER="256.pgdg100+1"
PG_REPACK_BUSTER="1.5.0-1.pgdg100+1"
PG_QUALSTATS_BUSTER="2.1.0-1.pgdg100+1"
PG_STAT_KCACHE_BUSTER="2.2.2-2.pgdg100+1"
PG_TRACK_SETTINGS_BUSTER="2.1.2-2.pgdg100+1"
PG_WAIT_SAMPLING_BUSTER="1.1.5-1.pgdg100+1"
PG_HYPOPG_BUSTER="1.4.0-2.pgdg100+1"
PG_POWA_BUSTER="4.2.1-1.pgdg100+1"
PG_BULLSEYE="16.1-1.pgdg110+1"
PGCOMMON_BULLSEYE="256.pgdg110+1"
PG_REPACK_BULLSEYE="1.5.0-1.pgdg110+1"
PG_QUALSTATS_BULLSEYE="2.1.0-1.pgdg110+1"
PG_STAT_KCACHE_BULLSEYE="2.2.2-2.pgdg110+1"
PG_TRACK_SETTINGS_BULLSEYE="2.1.2-2.pgdg110+1"
PG_WAIT_SAMPLING_BULLSEYE="1.1.5-1.pgdg110+1"
PG_HYPOPG_BULLSEYE="1.4.0-2.pgdg110+1"
PG_POWA_BULLSEYE="4.2.1-1.pgdg110+1"
PG_BOOKWORM="16.1-1.pgdg120+1"
PGCOMMON_BOOKWORM="256.pgdg120+1"
PG_REPACK_BOOKWORM="1.5.0-1.pgdg120+1"
PG_QUALSTATS_BOOKWORM="2.1.0-1.pgdg120+1"
PG_STAT_KCACHE_BOOKWORM="2.2.2-2.pgdg120+1"
PG_TRACK_SETTINGS_BOOKWORM="2.1.2-2.pgdg120+1"
PG_WAIT_SAMPLING_BOOKWORM="1.1.5-1.pgdg120+1"
PG_HYPOPG_BOOKWORM="1.4.0-2.pgdg120+1"
PG_POWA_BOOKWORM="4.2.1-1.pgdg120+1"
PGKEYRING="2018.2"
PG_RHEL8="16.1-4PGDG.rhel8"
PG_REPACK_RHEL8="1.5.0-1PGDG.rhel8"
PG_QUALSTATS_RHEL8="2.1.0-1PGDG.rhel8"
PG_STAT_KCACHE_RHEL8="2.2.2-1PGDG.rhel8"
PG_TRACK_SETTINGS_RHEL8="2.1.2-2PGDG.rhel8"
PG_WAIT_SAMPLING_RHEL8="1.1.5-1PGDG.rhel8"
PG_HYPOPG_RHEL8="1.4.0-2PGDG.rhel8"
PG_POWA_WEB_RHEL8="4.2.2-1PGDG.rhel8"
PG_POWA_RHEL8="4.2.2-1PGDG.rhel8"
# End override from EXTDEPS-getlastpg

# Additional PostgreSQL extensions
PG_REPACK_DEB="postgresql-16-repack"
PG_REPACK_RPM="pg_repack_16"
PG_QUALSTATS_DEB="postgresql-16-pg-qualstats"
PG_QUALSTATS_RPM="pg_qualstats_16"
PG_STAT_KCACHE_DEB="postgresql-16-pg-stat-kcache"
PG_STAT_KCACHE_RPM="pg_stat_kcache_16"
PG_TRACK_SETTINGS_DEB="postgresql-16-track-settings"
PG_TRACK_SETTINGS_RPM="pg_track_settings_16"
PG_WAIT_SAMPLING_DEB="postgresql-16-pg-wait-sampling"
PG_WAIT_SAMPLING_RPM="pg_wait_sampling"
PG_HYPOPG_DEB="postgresql-16-hypopg"
PG_HYPOPG_RPM="hypopg_16"
PG_POWA_DEB="postgresql-16-powa"
PG_POWA_RPM="powa_16"
PG_POWA_WEB_RPM="powa_16"

PG_EXT_MODULES_JAMMY=" \
	${PG_REPACK_DEB}=${PG_REPACK_JAMMY} \
	${PG_QUALSTATS_DEB}=${PG_QUALSTATS_JAMMY} \
	${PG_STAT_KCACHE_DEB}=${PG_STAT_KCACHE_JAMMY} \
	${PG_TRACK_SETTINGS_DEB}=${PG_TRACK_SETTINGS_JAMMY} \
	${PG_WAIT_SAMPLING_DEB}=${PG_WAIT_SAMPLING_JAMMY} \
	${PG_POWA_DEB}=${PG_POWA_JAMMY} \
	${PG_HYPOPG_DEB}=${PG_HYPOPG_JAMMY}"

PG_EXT_MODULES_FOCAL=" \
	${PG_REPACK_DEB}=${PG_REPACK_FOCAL} \
	${PG_QUALSTATS_DEB}=${PG_QUALSTATS_FOCAL} \
	${PG_STAT_KCACHE_DEB}=${PG_STAT_KCACHE_FOCAL} \
	${PG_TRACK_SETTINGS_DEB}=${PG_TRACK_SETTINGS_FOCAL} \
	${PG_WAIT_SAMPLING_DEB}=${PG_WAIT_SAMPLING_FOCAL} \
	${PG_POWA_DEB}=${PG_POWA_FOCAL} \
	${PG_HYPOPG_DEB}=${PG_HYPOPG_FOCAL}"

PG_EXT_MODULES_BOOKWORM=" \
	${PG_REPACK_DEB}=${PG_REPACK_BOOKWORM} \
	${PG_QUALSTATS_DEB}=${PG_QUALSTATS_BOOKWORM} \
	${PG_STAT_KCACHE_DEB}=${PG_STAT_KCACHE_BOOKWORM} \
	${PG_TRACK_SETTINGS_DEB}=${PG_TRACK_SETTINGS_BOOKWORM} \
	${PG_WAIT_SAMPLING_DEB}=${PG_WAIT_SAMPLING_BOOKWORM} \
	${PG_POWA_DEB}=${PG_POWA_BOOKWORM} \
	${PG_HYPOPG_DEB}=${PG_HYPOPG_BOOKWORM}"

PG_EXT_MODULES_BULLSEYE=" \
	${PG_REPACK_DEB}=${PG_REPACK_BULLSEYE} \
	${PG_QUALSTATS_DEB}=${PG_QUALSTATS_BULLSEYE} \
	${PG_STAT_KCACHE_DEB}=${PG_STAT_KCACHE_BULLSEYE} \
	${PG_TRACK_SETTINGS_DEB}=${PG_TRACK_SETTINGS_BULLSEYE} \
	${PG_WAIT_SAMPLING_DEB}=${PG_WAIT_SAMPLING_BULLSEYE} \
	${PG_POWA_DEB}=${PG_POWA_BULLSEYE} \
	${PG_HYPOPG_DEB}=${PG_HYPOPG_BULLSEYE}"

PG_EXT_MODULES_BUSTER=" \
	${PG_REPACK_DEB}=${PG_REPACK_BUSTER} \
	${PG_QUALSTATS_DEB}=${PG_QUALSTATS_BUSTER} \
	${PG_STAT_KCACHE_DEB}=${PG_STAT_KCACHE_BUSTER} \
	${PG_TRACK_SETTINGS_DEB}=${PG_TRACK_SETTINGS_BUSTER} \
	${PG_WAIT_SAMPLING_DEB}=${PG_WAIT_SAMPLING_BUSTER} \
	${PG_POWA_DEB}=${PG_POWA_BUSTER} \
	${PG_HYPOPG_DEB}=${PG_HYPOPG_BUSTER}"

PG_EXT_MODULES_RHEL8=" \
	${PG_REPACK_RPM}=${PG_REPACK_RHEL8} \
	${PG_QUALSTATS_RPM}=${PG_QUALSTATS_RHEL8} \
	${PG_STAT_KCACHE_RPM}=${PG_STAT_KCACHE_RHEL8} \
	${PG_TRACK_SETTINGS_RPM}=${PG_TRACK_SETTINGS_RHEL8} \
	${PG_WAIT_SAMPLING_RPM}=${PG_WAIT_SAMPLING_RHEL8} \
	${PG_POWA_RPM}=${PG_POWA_RHEL8} \
	${PG_POWA_WEB_RPM}=${PG_POWA_WEB_RHEL8} \
	${PG_HYPOPG_RPM}=${PG_HYPOPG_RHEL8}"


# Keycloak
BMKEYCLOAKDEB="bm-keycloak=${BMKEYCLOAK}"
BMKEYCLOAKRPM="bm-keycloak=${BMKEYCLOAK}"


# Cyrus
BMCYRUSDEB="bm-cyrus-imapd=${BMCYRUS} \
			libbmsds=${BMSDS} \
			bm-imap-i18n=${BMCYRUS} \
			cyrus-common-2.4=${BMCYRUS} \
			cyrus-common=${BMCYRUS}"
BMCYRUSRPM="bm-cyrus-imapd=${BMCYRUS} \
			libbmsds=${BMSDS}"

# tick
BMTICKDEB="bm-telegraf=${TELEGRAF} \
           bm-kapacitor=${KAPACITOR} \
           bm-chronograf=${CHRONOGRAF} \
           bm-influxdb=${INFLUXDB}"
BMTICKRPM="bm-telegraf=${TELEGRAF} \
           bm-kapacitor=${KAPACITOR} \
           bm-chronograf=${CHRONOGRAF} \
           bm-influxdb=${INFLUXDB}"

# ES
BMESDEB="bm-elasticsearch=${BMES}"
BMESRPM="bm-elasticsearch=${BMES}"

# JDK
BMJDKDEB="bm-jdk=${BMJDK}"
BMJDKRPM="bm-jdk=${BMJDK}"

# KAFKA
BMKAFKAREPLDEB="bm-kafka-replicator=${KAFKA_REPL}"
BMKAFKADEB="bm-kafka=${KAFKA}"
BMMINIODEB="bm-sds-storage-s3-minio=${MINIO}"
BMWEEDDEB="bm-sds-storage-s3-seaweedfs=${WEED}"
BMCASSDEB="bm-cassandra=${CASS}"

# OpenTelemetry
BM_TELEMETRY_DEB="bm-opentelemetry-agent=${TELEMETRY}"
BM_GRAFANA_STACK_DEB="bm-grafana-stack=${GRAFANA_STACK}"
GRAFANA_DEB="grafana=${GRAFANA}"
GRAFANA_TEMPO_DEB="tempo=${GRAFANA_TEMPO}"
GRAFANA_AGENT_DEB="grafana-agent=${GRAFANA_AGENT}"
GRAFANA_MIMIR_DEB="mimir=${GRAFANA_MIMIR}"

# SNZIP
BMSNZIPDEB="bm-maintenance-snzip=${BMSNZIP}"
BMSNZIPRPM="bm-maintenance-snzip=${BMSNZIP}"

# NGinx
BMNGINXDEB="bm-nginx=${BMNGINX} \
			nginx-common=${BMNGINX} \
			nginx-extras=${BMNGINX} \
			nginx-full=${BMNGINX} \
			nginx-light=${BMNGINX} \
			nginx-naxsi=${BMNGINX} \
			nginx=${BMNGINX}"
BMNGINXRPM="bm-nginx=${BMNGINX}"

# PHP
BMPHPDEB="bm-php=${BMPHP} \
			php5-cli=${BMPHP} \
			php5-fpm=${BMPHP} \
			php5-memcache=${BMPHPMEMCACHE} \
			php5-readline=${BMPHP}"
BMPHPRPM="bm-php=${BMPHP}"

BMPHPMEMCACHEDEB="bm-php-memcache=${BMPHPMEMCACHE}"
BMPHPMEMCACHERPM="bm-php-memcache=${BMPHPMEMCACHE}"

# PostgreSQL
BMPOSTGRESQLDEB="bm-postgresql=${BMPOSTGRESQL}"
BMPOSTGRESQLRPM="bm-postgresql=${BMPOSTGRESQL} \
				bm-storage=${BMPOSTGRESQL}"

PGKEYRINGDEB="pgdg-keyring=${PGKEYRING}"

PGDEB_BOOKWORM="postgresql-16=${PG_BOOKWORM} \
		postgresql-client-16=${PG_BOOKWORM} \
		postgresql-contrib-16=${PG_BOOKWORM} \
		postgresql-server-dev-16=${PG_BOOKWORM} \
		libpq5=${PG_BOOKWORM} \
		libpq-dev=${PG_BOOKWORM} \
		libllvm11 ${PG_EXT_MODULES_BOOKWORM}"
PGCOMMONDEB_BOOKWORM="postgresql-client-common=${PGCOMMON_BOOKWORM} \
		postgresql-common=${PGCOMMON_BOOKWORM}"

PGDEB_BULLSEYE="postgresql-16=${PG_BULLSEYE} \
		postgresql-client-16=${PG_BULLSEYE} \
		postgresql-contrib-16=${PG_BULLSEYE} \
		postgresql-server-dev-16=${PG_BULLSEYE} \
		libpq5=${PG_BULLSEYE} \
		libpq-dev=${PG_BULLSEYE} \
		libllvm11 ${PG_EXT_MODULES_BULLSEYE}"
PGCOMMONDEB_BULLSEYE="postgresql-client-common=${PGCOMMON_BULLSEYE} \
		postgresql-common=${PGCOMMON_BULLSEYE}"

PGDEB_BUSTER="postgresql-16=${PG_BUSTER} \
		postgresql-client-16=${PG_BUSTER} \
		postgresql-contrib-16=${PG_BUSTER} \
		postgresql-server-dev-16=${PG_BUSTER} \
		libpq5=${PG_BUSTER} \
		libpq-dev=${PG_BUSTER} \
		libllvm6.0 ${PG_EXT_MODULES_BUSTER}"
PGCOMMONDEB_BUSTER="postgresql-client-common=${PGCOMMON_BUSTER} \
		postgresql-common=${PGCOMMON_BUSTER}"

PGDEB_FOCAL="postgresql-16=${PG_FOCAL} \
		postgresql-client-16=${PG_FOCAL} \
		postgresql-contrib-16=${PG_FOCAL} \
		postgresql-server-dev-16=${PG_FOCAL} \
		libpq5=${PG_FOCAL} \
		libpq-dev=${PG_FOCAL} ${PG_EXT_MODULES_FOCAL}"
PGCOMMONDEB_FOCAL="postgresql-client-common=${PGCOMMON_FOCAL} \
		postgresql-common=${PGCOMMON_FOCAL}"

PGDEB_JAMMY="postgresql-16=${PG_JAMMY} \
		postgresql-client-16=${PG_JAMMY} \
		postgresql-contrib-16=${PG_JAMMY} \
		postgresql-server-dev-16=${PG_JAMMY} \
		libpq5=${PG_JAMMY} \
		libpq-dev=${PG_JAMMY} ${PG_EXT_MODULES_JAMMY}"
PGCOMMONDEB_JAMMY="postgresql-client-common=${PGCOMMON_JAMMY} \
		postgresql-common=${PGCOMMON_JAMMY}"

PGRPM_RHEL8="postgresql16=${PG_RHEL8} \
		postgresql16-contrib=${PG_RHEL8} \
		postgresql16-devel=${PG_RHEL8} \
		postgresql16-libs=${PG_RHEL8} \
		postgresql16-server=${PG_RHEL8} ${PG_EXT_MODULES_RHEL8}"

# Distribution
DEB_DISTRIBUTION="BUSTER BULLSEYE BOOKWORM FOCAL JAMMY"

DEB="${BMCYRUSDEB} \
		${BMKEYCLOAKDEB} \
		${BMESDEB} \
		${BMTICKDEB} \
		${BMJDKDEB} \
		${BMKAFKADEB} \
		${BMKAFKAREPLDEB} \
		${BM_TELEMETRY_DEB} \
		${BM_GRAFANA_STACK_DEB} \
		${GRAFANA_DEB} \
		${GRAFANA_MIMIR_DEB} \
		${GRAFANA_TEMPO_DEB} \
		${GRAFANA_AGENT_DEB} \
		${BMMINIODEB} \
		${BMWEEDDEB} \
		${BMCASSDEB} \
		${BMSNZIPDEB} \
		${BMNGINXDEB} \
		${BMPHPDEB} ${BMPHPMEMCACHEDEB} \
		${BMPOSTGRESQLDEB} ${PGKEYRINGDEB}"

for debDist in ${DEB_DISTRIBUTION}; do
	PGDEB="PGDEB_"${debDist}
	PGCOMMONDEB="PGCOMMONDEB_"${debDist}
	declare "${debDist}=${DEB} ${!PGDEB} ${!PGCOMMONDEB}"
done

RHEL8="${BMCYRUSRPM} \
		${BMKEYCLOAKRPM} \
		${BMESRPM} \
		${BMTICKRPM} \
		${BMJDKRPM} \
		${BMSNZIPRPM} \
		${BMNGINXRPM} \
		${BMPHPRPM} ${BMPHPMEMCACHERPM} \
		${BMPOSTGRESQLRPM} ${PGRPM_RHEL8}"
